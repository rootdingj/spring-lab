# Spring Boot 配置

Spring Boot 通常情况下会启动自动配置，但他可以通过读取固定路径下的固定名称的配置文件，修改Spring Boot 自动装配的默认值。主要包含如下几点：

- 固定路径为：src/main/resources目录或者类路径/config下

- 固定名称的配置文件有两种：
    
    - application.properties
    - application.yml

- 配置文件的作用为： 配置文件的作用：修改SpringBoot自动配置的默认值

## 1 yml 配置简介

yml是YAML（YAML Ain't Markup Language）语言的文件，以数据为中心，比json、xml等更适合做配置文件

    - yml配置
        ```yml
        server:
            port: 8081
        ```
    - xml配置
        ```xml
        <server>
            <port>8081</port>
        </server>
        ```
    - properties配置
        ```properties
        server.port=8080
        ```
扩展思考：为啥有 properties 配置 Spring Boot 还要yml配置？

- 语法简洁性，YAML使用缩进和层次结构来表示配置之间的关系，语法更加简洁明了；
    ```yml
    spring:
        datasource:
            url: jdbc:mysql://localhost:3306/mydb
            username: root
            password: password
            driver-class-name: com.mysql.cj.jdbc.Driver
    ```
    ```properties
    spring.datasource.url=jdbc:mysql://localhost:3306/mydb
    spring.datasource.username=root
    spring.datasource.password=password
    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
    ```
- 数据结构支持，YAML原生支持列表、映射等复杂数据结构，能够更自然地表达配置信息；
- 可读性和可维护性，YAML的缩进和层次结构使得配置文件的结构清晰，易于阅读和维护；
- 多环境配置支持，YAML文件可以通过---分隔符在同一个文件中定义多个环境的配置；
    ```yml
    spring:
        profiles: dev
    datasource:
        url: jdbc:mysql://localhost:3306/devdb
        username: devuser
        password: devpassword

    ---
    spring:
        profiles: prod
    datasource:
        url: jdbc:mysql://prodserver:3306/proddb
        username: produser
        password: prodpassword
    ```

## 2 YAML语法

### 2.1 基本语法

- k:(空格)v：表示一对键值对（空格必须有）；
- 使用空格缩进表示层级关系；
- 缩进的空格数目不重要，只要相同层级的元素左侧对齐即可；
- 属性和值大小写敏感。

### 2.2 YAML值的常用写法

YAML 支持的三种数据结构：字面量、对象、数组，详细说明如下。


- **字面量**

    - 单个的、不可再分的值；可以是数字、字符串、布尔、日期。
    - 字符串默认不使用引号（单引号或双引号），使用引号代表特殊含义：

        - 双引号（""）:表不会转义字符串里面的特殊字符；特殊字符会作为本身想表示的意思，例如
            ```yml
            name: "zhangsan \n lisi"
            输出 ==> zhangsan 换行 lisi
            ```
        - 单引号（''）:表会转义特殊字符，特殊字符最终只是一个普通的字符串数据
            ```yml
            name: "zhangsan \n lisi"
            输出 ==> zhangsan \n lisi
            ```
- **对象**

    - 键值对的集合，可以是对象（属性: 属性值）、Map（key: value）；
    - 对象还是 k:(空格)v 的方式；
    - 换行缩进写法：
        ```yml
        custom:
            name: zhangsan
            age: 20
        ```
    - 行内写法：
        ```yml
        custom: {name: zhangsan,age: 18}
        ```

- **数组**

    - 一组按次序排列的值，可以是数组、list、set
    - 数组中可以嵌套对象
    - 换行缩进写法，用- 值表示数组中的一个元素
         ```yml
        pets:
        ‐ cat
        ‐ dog
        ‐ pig
        ```
    - 行内写法：
        ```yml
        pets: [cat,dog,pig]
        ``` 

注意：
- Spring Boot使用 snakeyaml 解析yml文件；
- 语法参考：https://bitbucket.org/asomov/snakeyaml/wiki/Documentation#markdown-header-yaml-syntax 


## 3 配置文件值注入













